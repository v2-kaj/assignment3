<!DOCTYPE html>
<html lang="en">
<%- include('./partials/head') %>

  <body>
    <div class="container">
      <%- include("partials/nav")%>
        <main>
          <%- include("partials/searchBar")%>

            <h1>
              <%= title %>
            </h1>
            <div class="content">
              <% if (programs.length> 0) { %>
              <div class="chart">
                <canvas id="performanceChart" style="width:100%;max-width:400px"></canvas>
                <script>

                  var programs = <%- JSON.stringify(programs) %>;
                  var avg = <%- JSON.stringify(avg) %>;

                  new Chart("performanceChart", {
                    type: "horizontalBar",
                    data: {
                      labels: programs,
                      datasets: [{
                        backgroundColor: [
                          "springgreen",
                          "orange",
                          "magenta",
                        ],
                        data: avg
                      }]
                    },
                    options: {
                      responsive: true,
                      maintainAspectRatio: false,
                      legend: { display: false },
                      title: {
                        display: true,
                        text: "Programs"
                      },
                      scales: {
                        yAxes: [{
                          ticks: {
                            beginAtZero: true
                          },
                          scaleLabel: {
                            display: true,
                            labelString: "Program Abbreviation"
                          }
                        }],
                        xAxes: [{
                          ticks: {
                                beginAtZero: true
                              },
                          scaleLabel: {
                            display: true,
                            labelString: "Avg Marks out of 100"
                          }
                        }]
                      }
                    }
                  })


                </script>


                <% } else { %>
                  <p>No avg grades.</p>
                  <% } %>

              </div>
            </div>

        </main>
    </div>

  </body>

</html>